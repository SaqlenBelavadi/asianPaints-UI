<div class="container-fluid main-filter-outer" *ngIf="isLanding">
  <div *ngIf="isBreadcrumb" class="breadcrumbe">
    <span>{{ breadCrumbMain }}</span>
    <span> {{ breadCrumbSub ? "/ " + breadCrumbSub : breadCrumbSub }}</span>
</div>
  
    <!-- <xng-breadcrumb separator="/" id="titleCase" *ngIf="isBreadcrumb">
      <ng-container *xngBreadcrumbItem="let breadcrumb; let first = first">
        <ng-container *ngIf="first"> Activity </ng-container>
        <ng-container *ngIf="first || breadcrumb === 'activity'">
          {{ activityName }}
        </ng-container>
        <ng-container *ngIf="!first && breadcrumb !== 'activity'">
        </ng-container>
      </ng-container>
    </xng-breadcrumb> -->
    <ng-container *ngIf="!isBreadcrumb">
      <div class="row g-3">
      <div class="fl-item col col-md-2" *ngIf="role !== roleEnum.EMPLOYEE">
        <app-multi-select-search
          [options]="locationArray"
          [label]="'Location'"
          [filterName]="'location'"
          [isMultiSelect]="true"
          optionsCache="locationCacheArray"
          (selectedLocation)="selectedLoc($event)"
          *ngIf="locationArray.length > 0"
        ></app-multi-select-search>
      </div>

      <div class="fl-item form-field col-md-2">
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-icon> local_activity</mat-icon>
          <mat-label>Activity</mat-label>
          <mat-select
            [formControl]="activtiyNameTagControl"
            [multiple]="true"
            #multiSelect
          >
            <mat-option>
              <ngx-mat-select-search
                [formControl]="activityFilterCtrl"
                [placeholderLabel]="'Search'"
                [noEntriesFoundLabel]="'Not found'"
              ></ngx-mat-select-search>
            </mat-option>
            <!-- <mat-option *ngIf="activtyNameByTagArray.length == 0">-- None --</mat-option> -->
            <!-- <mat-option (onSelectionChange)="selectAllOptions($event)" [value]="'activityName='"> All Activities </mat-option> -->
            <ng-container
              *ngFor="let item of filteredActivities | async; let i = index"
            >
              <div class="filter-checkbox">
                <mat-checkbox
                  class="tag-cb"
                  [value]="item.tag"
                  (change)="toggleSelection($event, item)"
                  *ngIf="item.tag"
                  [formControl]="tagFilterControl"
                >
                </mat-checkbox>
                <mat-optgroup [label]="item.tag">
                  <mat-option
                  
                    *ngFor="let act of item.activities"
                    [value]="act.activityId"
                    (onSelectionChange)="
                      selectOptions($event, act.activityId, item.tag)
                    "
                    title="{{ act.activityId !== 'allActivities' ? act.activityId + '-' + act.activityName : act.activityName }}"
                  >
                    {{
                      act.activityId !== "allActivities"
                        ? act.activityId + "-" + act.activityName
                        : act.activityName
                    }}
                  </mat-option>
                </mat-optgroup>
              </div>
            </ng-container>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="fl-item col col-md-2">
        <app-multi-select-search
          [options]="modeArray"
          [label]="'Mode'"
          [filterName]="'modeOfParticipation'"
          [isMultiSelect]="true"
          [optionsCache]="modeCacheArray"
          *ngIf="modeArray.length > 0"
        ></app-multi-select-search>
      </div>

      <div class="fl-item col col-md-2">
        <app-multi-select-search
          [options]="themeArray"
          [label]="'Theme'"
          [filterName]="'themeName'"
          [isMultiSelect]="true"
          [optionsCache]="themeCacheArray"
          *ngIf="themeArray.length > 0"
        ></app-multi-select-search>
      </div>
      <div class="fl-item col col-md-2" *ngIf="role === roleEnum.EMPLOYEE">
        <app-multi-select-search
          [options]="requiredTimeArray"
          [label]="'Total Hours'"
          [filterName]="'timerequired'"
          [isMultiSelect]="false"
          *ngIf="requiredTimeArray.length > 0"
        ></app-multi-select-search>
      </div>

      <div class="fl-item col fr-date col-md-3">
        <mat-form-field appearance="outline" class="date-picker picker">
          <mat-label>Date range</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input matEndDate formControlName="end" placeholder="End date" />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker
            #picker
            [calendarHeaderComponent]="DatePickerHeaderComponent"
            [touchUi]="isTouchUIActivated"
          ></mat-date-range-picker>
          <!-- <mat-label>Date range</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Start date">
          <input matEndDate placeholder="End date">
        </mat-date-range-input>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker> -->
        </mat-form-field>
      </div>

      <div class="fl-item col-md-1">
        <button
          type="button"
          class="btn btn-white"
          (click)="applyGlobalFilters()"
        >
          Apply
        </button>
      </div>
    </div>
    </ng-container>
  
</div>
