<div class="closed__wrapper">
  <div class="">
    <div class="chat__element">
      <h2 class="heading">Add Voice Of Change</h2>
      <form [formGroup]="testimonialForm">
        <mat-form-field appearance="outline">
          <mat-label>Name of Person</mat-label>
          <input matInput placeholder="Name of Person" formControlName="name" />
        </mat-form-field>
        <mat-error *ngIf="
            testimonialForm.get('name')?.invalid &&
            (testimonialForm.get('name')?.dirty ||
              testimonialForm.get('name')?.touched)
          ">
          <div *ngIf="
              testimonialForm.get('name')?.hasError('trimError');
              else requiredError
            ">
            {{ testimonialForm.get("name")?.errors?.trimError?.value }}
          </div>
          <ng-template #requiredError>
            <ng-container *ngIf="testimonialForm.get('name')?.invalid">
              Testimonial name required
            </ng-container>
          </ng-template>
        </mat-error>
        <mat-form-field appearance="outline">
          <mat-label>Designation And Location</mat-label>
          <input
            matInput
            placeholder="Designation and Location"
            formControlName="designation"
          />
          <mat-error *ngIf="
            testimonialForm.get('designation')?.invalid &&
            (testimonialForm.get('designation')?.dirty ||
              testimonialForm.get('designation')?.touched)
          ">
          <div *ngIf="
              testimonialForm.get('designation')?.hasError('trimError');
              else requiredError
            ">
            {{ testimonialForm.get("designation")?.errors?.trimError?.value }}
          </div>
          <ng-template #requiredError>
            <ng-container *ngIf="testimonialForm.get('designation')?.invalid">
              Designation and Location required
            </ng-container>
          </ng-template>
        </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Speaks Type</mat-label>
          <textarea
            matInput
            placeholder="Speaks Type"
            formControlName="comments"
          >
          <mat-error *ngIf="
            testimonialForm.get('comments')?.invalid &&
            (testimonialForm.get('comments')?.dirty ||
              testimonialForm.get('comments')?.touched)
          ">
          <div *ngIf="
              testimonialForm.get('comments')?.hasError('trimError');
              else requiredError
            ">
            {{ testimonialForm.get("comments")?.errors?.trimError?.value }}
          </div>
          <ng-template #requiredError>
            <ng-container *ngIf="testimonialForm.get('designation')?.invalid">
              Speaks type required
            </ng-container>
          </ng-template>
        </mat-error>
          </textarea>
        </mat-form-field>

        <div class="upload">
          <div class="flbx-stretch align-items-start">
            <h3>Upload Picture</h3>
          </div>

          <div class="item-wrapper one">
            <div class="item">
              <div class="item-inner">
                <div class="item-content">
                  <div
                    class="image-upload"
                    appDrag
                    (drop)="filesDropped($event, 'image')"
                  >
                    <label style="cursor: pointer" for="file_upload">
                      <div class="h-100">
                        <div class="dplay-tbl">
                          <div class="dplay-tbl-cell">
                            <img
                              src="assets/images/upload-icon.svg"
                              alt="upload"
                            />
                            <div>
                              <h3 class="m-0 text-start">
                                Drag and drop file here
                              </h3>
                              <p class="m-0 text-start">Or</p>
                              <h2 class="m-0 text-start">Browse file</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--upload-content-->
                      <input
                        type="file"
                        id="file_upload"
                        class="image-input"
                        multiple
                        data-traget-resolution="image_resolution"
                        value=""
                        #fileInput
                        (change)="onFileSelection($event, 'image')"
                        accept=".jpg,.jpeg,.bmp,.png,.svg,.gif,.jfif,.pjpeg,pjp"
                      />
                      <mat-error
                        *ngIf="testimonialForm.get('image')?.errors?.required"
                      >
                      Please select any image file of format .jpg, .jpeg, .bmp, .png, .svg, .gif, .jfif, .pjpeg, pjp
                      </mat-error>
                    </label>
                  </div>
                </div>
                <!--item-content-->
              </div>
              <!--item-inner-->
            </div>
            <!--item-->
          </div>
          <!-- <div class="col-12 col-md-6 selected-img mt-4">
      <p>*Image file size limit is 5MB</p>
    </div> -->

          <div
            class="choose-img mt-3 d-flex"
            *ngIf="photosOrVideos.value.length"
          >
            <div
              class="answers"
              formArrayName="image"
              *ngFor="let preview of photosOrVideos?.controls; let i = index"
            >
              <div class="flbx-vac" [formGroupName]="i">
                <label class="answer">
                  <img [src]="preview.get('url')?.value" class="preview_img" />
                  <div class="close">
                    <img
                      src="assets/images/close.svg"
                      (click)="clearImage(i, 'image')"
                    />
                  </div>
                </label>
              </div>
              <!-- <p class="m-0 pt-2">image.png</p> -->
              <!-- <mat-form-field appearance="outline">
            <mat-label>Actual Logistic Expense </mat-label>
            <input matInput formControlName="actualLogisticExpense" />
          </mat-form-field> -->
            </div>
          </div>
          <!-- <div class="twobtn-group mt-4 justify-content-end">
            <button type="button" class="btn btn-grey" mat-dialog-close>
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-red"
              [disabled]="photosOrVideos.value.length === 0"
            >
              <img src="assets/images/publish_red.svg" alt="" /> Upload
            </button>
          </div> -->
        </div>
        <div class="upload">
          <div class="flbx-stretch align-items-start">
            <h3>Upload Voice File</h3>
          </div>

          <div class="item-wrapper one">
            <div class="item">
              <div class="item-inner">
                <div class="item-content">
                  <div
                    class="image-upload"
                    appDrag
                    (drop)="filesDropped($event, 'audio')"
                  >
                    <label style="cursor: pointer" for="file_upload1">
                      <div class="h-100">
                        <div class="dplay-tbl">
                          <div class="dplay-tbl-cell">
                            <img
                              src="assets/images/upload-icon.svg"
                              alt="upload"
                            />
                            <div>
                              <h3 class="m-0 text-start">
                                Drag and drop file here
                              </h3>
                              <p class="m-0 text-start">Or</p>
                              <h2 class="m-0 text-start">Browse file</h2>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--upload-content-->
                      <input
                        type="file"
                        id="file_upload1"
                        class="image-input"
                        multiple
                        data-traget-resolution="image_resolution"
                        value=""
                        #voiceInput
                        (change)="onFileSelection($event, 'audio')"
                        accept="audio/*"
                      />
                      <mat-error
                        *ngIf="testimonialForm.get('audio')?.errors?.required"
                      >
                        Please select any audio file of format .mp3
                      </mat-error>
                    </label>
                  </div>
                </div>
                <!--item-content-->
              </div>
              <!--item-inner-->
            </div>
            <!--item-->
          </div>
          <!-- <div class="col-12 col-md-6 selected-img mt-4">
      <p>*Image file size limit is 5MB</p>
    </div> -->

          <div class="choose-img mt-3 d-flex" *ngIf="audioFiles.value.length">
            <div
              class="answers"
              formArrayName="audio"
              *ngFor="let preview of audioFiles?.controls; let i = index"
            >
              <div class="flbx-vac" [formGroupName]="i">
                <label class="answer">
                  <audio
                    [src]="preview.get('url')?.value"
                    class="preview_img"
                    controls=""
                  >
                    <!-- <source [src]="preview.get('url')?.value" type="audio/*" /> -->
                  </audio>
                  <div class="close">
                    <img
                      src="assets/images/close.svg"
                      (click)="clearImage(i, 'audio')"
                    />
                  </div>
                </label>
              </div>
              <!-- <p class="m-0 pt-2">image.png</p> -->
              <!-- <mat-form-field appearance="outline">
            <mat-label>Actual Logistic Expense </mat-label>
            <input matInput formControlName="actualLogisticExpense" />
          </mat-form-field> -->
            </div>
          </div>
          <!-- <div class="twobtn-group mt-4 justify-content-end">
            <button type="button" class="btn btn-grey" mat-dialog-close>
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-red"
              [disabled]="photosOrVideos.value.length === 0"
            >
              <img src="assets/images/publish_red.svg" alt="" /> Upload
            </button>
          </div> -->
        </div>
      </form>
    </div>
  </div>

  <div class="notification__container">
    <button class="btn btn-red" (click)="onSave()">Save</button>
    <button class="btn btn-grey" mat-dialog-close>Cancel</button>
  </div>
</div>
