"use strict";(self.webpackChunkEVP=self.webpackChunkEVP||[]).push([[175],{1821:(Z,y,l)=>{l.d(y,{z:()=>f});var g=l(8966),p=l(5e3);let f=(()=>{class d{constructor(_,r){this.dialogRef=_,this.data=r}confirm(){this.dialogRef.close(!0)}close(){this.dialogRef.close(!1)}}return d.\u0275fac=function(_){return new(_||d)(p.Y36(g.so),p.Y36(g.WI))},d.\u0275cmp=p.Xpm({type:d,selectors:[["app-confirmation-dialog"]],decls:12,vars:2,consts:[[1,"closed__wrapper"],[1,"notification__head"],[1,"notification__delete","chat__element"],[1,"heading"],[1,"closed__heading"],[1,"notification__container"],[1,"btn","btn-grey",3,"click"],[1,"btn","btn-red",3,"click"]],template:function(_,r){1&_&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),p._uU(4),p.qZA(),p.TgZ(5,"h3",4),p._uU(6),p.qZA()()(),p.TgZ(7,"div",5)(8,"button",6),p.NdJ("click",function(){return r.close()}),p._uU(9,"Cancel"),p.qZA(),p.TgZ(10,"button",7),p.NdJ("click",function(){return r.confirm()}),p._uU(11,"Yes"),p.qZA()()()),2&_&&(p.xp6(4),p.Oqu(null==r.data?null:r.data.heading),p.xp6(2),p.Oqu(null==r.data?null:r.data.message))},styles:[""]}),d})()},2175:(Z,y,l)=>{l.r(y),l.d(y,{ParticipationModule:()=>bt});var g=l(9808),p=l(7777),f=l(1083),d=l(9202),u=l(520),_=l(58),r=l(1821),h=l(4565),C=l(3075),P=l(8966),t=l(5e3),L=l(7603),b=l(4383),T=l(7322),E=l(4107),S=l(3586),D=l(508);const M=["fileDropRef"],U=["file"];function N(n,o){1&n&&(t.TgZ(0,"mat-form-field",13)(1,"mat-label"),t._uU(2,"Choose Section"),t.qZA(),t.TgZ(3,"mat-select",14),t._UZ(4,"ngx-mat-select-search",15),t.TgZ(5,"mat-option"),t._uU(6,"test"),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("placeholderLabel","Search")("noEntriesFoundLabel","Not found"))}function w(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().chooseFile()})("fileDropped",function(a){return t.CHM(e),t.oxw().fileDropped(a)}),t.O4$(),t.TgZ(1,"svg",17)(2,"g",18),t._UZ(3,"path",19)(4,"path",20),t.qZA()(),t.kcU(),t.TgZ(5,"p"),t._uU(6,"Drag and drop to upload"),t.qZA(),t.TgZ(7,"input",21,22),t.NdJ("change",function(a){return t.CHM(e),t.oxw().onFileSelected(a.target.files)}),t.qZA()()}}function O(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",24),t.O4$(),t.TgZ(2,"svg",25),t._UZ(3,"polygon",26),t.TgZ(4,"g"),t._UZ(5,"path",27)(6,"path",28)(7,"path",29)(8,"path",30)(9,"path",31),t.qZA(),t._UZ(10,"polygon",32),t.qZA()(),t.kcU(),t.TgZ(11,"div",33)(12,"div",34)(13,"h4"),t._uU(14),t.qZA(),t.TgZ(15,"div",35),t.NdJ("click",function(){const c=t.CHM(e).index;return t.oxw().deleteFile(c)}),t.O4$(),t.TgZ(16,"svg",36),t._UZ(17,"path",37),t.qZA()()(),t.kcU(),t.TgZ(18,"p",38),t._uU(19),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.oxw();t.xp6(14),t.Oqu(null==e?null:e.name),t.xp6(5),t.hij(" ",i.formatBytes(null==e?null:e.size)," ")}}let B=(()=>{class n{constructor(e,i,a,c){this.dialogRef=e,this.data=i,this.communicationService=a,this.toastr=c,this.files=[]}ngOnInit(){this.type=this.data.type}onFileSelected(e){this.files=Object.keys(e).map(i=>e[i]),this.fileName=this.files[0].name}fileDropped(e){this.files=Object.keys(e).map(i=>e[i]),this.fileName=this.files[0].name}chooseFile(){this.file.nativeElement.click()}deleteFile(e){this.files.splice(e,1)}formatBytes(e,i=2){if(0===e)return"0 Bytes";const c=i<=0?0:i||2,m=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,m)).toFixed(c))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][m]}upload(){const e={headers:new u.WM({"Content-Type":"undefined"})},i=new FormData;i.append("file",this.files[0],this.files[0].name),this.data&&this.communicationService.post(this.data.url,i,e,!0).subscribe({next:c=>{var s,m;let x=(null===(s=null==c?void 0:c.data)||void 0===s?void 0:s.message)?null===(m=null==c?void 0:c.data)||void 0===m?void 0:m.message:"Data Uploaded";this.toastr.success(x),this.dialogRef.close(!0)},error:c=>{var s,m,x,A;this.toastr.error((null===(s=null==c?void 0:c.error)||void 0===s?void 0:s.data)?null===(m=null==c?void 0:c.error)||void 0===m?void 0:m.data:(null===(x=null==c?void 0:c.error)||void 0===x?void 0:x.message)?null===(A=null==c?void 0:c.error)||void 0===A?void 0:A.message:"Something went wrong")},complete:()=>{}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.so),t.Y36(P.WI),t.Y36(L.O),t.Y36(b._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-import-bulk"]],viewQuery:function(e,i){if(1&e&&(t.Gf(M,5),t.Gf(U,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.fileDropEl=a.first),t.iGM(a=t.CRH())&&(i.file=a.first)}},decls:17,vars:3,consts:[[1,"closed__wrapper"],[1,"notification__head"],[1,"modal__head"],[1,"notification__count"],[1,"chat__element"],[1,"form__container"],["appearance","outline",4,"ngIf"],["nggtFileDragDrop","","class","form__drag",3,"click","fileDropped",4,"ngIf"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],[1,"notification__container"],["mat-dialog-close","",1,"btn","btn-red"],[1,"btn","btn-grey",3,"click"],["appearance","outline"],["multiple",""],[3,"placeholderLabel","noEntriesFoundLabel"],["nggtFileDragDrop","",1,"form__drag",3,"click","fileDropped"],["width","32","height","32","viewBox","0 0 16 16"],["fill","currentColor","fill-rule","evenodd"],["d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773C16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318C1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593c.143-.863.698-1.723 1.464-2.383z"],["d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],["type","file","id","fileDropRef","accept",".csv",2,"display","none",3,"change"],["file",""],[1,"single-file"],[1,"file-icon",2,"width","50px"],["version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 58 58",0,"xml","space","preserve",2,"enable-background","new 0 0 58 58"],["points","51.5,14 37.5,0 6.5,0 6.5,58 51.5,58 ",2,"fill","#edeada"],["d","M16.5,23h25c0.552,0,1-0.447,1-1s-0.448-1-1-1h-25c-0.552,0-1,0.447-1,1S15.948,23,16.5,23z",2,"fill","#cec9ae"],["d","M16.5,15h10c0.552,0,1-0.447,1-1s-0.448-1-1-1h-10c-0.552,0-1,0.447-1,1S15.948,15,16.5,15z",2,"fill","#cec9ae"],["d","M41.5,29h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,29,41.5,29z",2,"fill","#cec9ae"],["d","M41.5,37h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,37,41.5,37z",2,"fill","#cec9ae"],["d","M41.5,45h-25c-0.552,0-1,0.447-1,1s0.448,1,1,1h25c0.552,0,1-0.447,1-1S42.052,45,41.5,45z",2,"fill","#cec9ae"],["points","37.5,0 37.5,14 51.5,14 ",2,"fill","#cec9ae"],[1,"info"],[1,"filename"],[1,"delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","18","viewBox","0 0 14 18"],["fill","#B1B1B1","fill-rule","nonzero","d","M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"],[1,"size"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Import"),t.qZA()()()(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,N,7,2,"mat-form-field",6),t.YNc(9,w,9,0,"div",7),t.TgZ(10,"div",8),t.YNc(11,O,20,2,"div",9),t.qZA()()(),t.TgZ(12,"div",10)(13,"button",11),t._uU(14,"Cancel"),t.qZA(),t.TgZ(15,"button",12),t.NdJ("click",function(){return i.upload()}),t._uU(16,"Upload"),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("ngIf",i.data.section),t.xp6(1),t.Q6J("ngIf",0===(null==i.files?null:i.files.length)),t.xp6(2),t.Q6J("ngForOf",i.files))},directives:[g.O5,T.KE,T.hX,E.gD,S.nu,D.ey,g.sg,P.ZT],styles:[".filename[_ngcontent-%COMP%]{display:flex;column-gap:10px;margin-top:10px}.filename[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer}.filename[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#ee4238}.filename[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();var k=l(5384),Y=l(3122),R=l(4617),J=l(6640),z=l(8833),j=l(5245),v=l(2075),H=l(7446),F=l(3556);function Q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadCsv()}),t._UZ(1,"img",19),t._uU(2," Upload "),t.qZA()}}function $(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadParticipationCsv()}),t._UZ(1,"img",21),t._uU(2," Download CSV "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",0===e.pagedItems.length)}}function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeSearch()}),t._uU(1,"cancel"),t.qZA()}}function W(n,o){1&n&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div",25),t._UZ(3,"img",26),t.TgZ(4,"h4"),t._uU(5,"No Records to show"),t.qZA()()()())}function V(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"No"),t.qZA())}function K(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.index,i=t.oxw(2);t.xp6(1),t.hij(" ",i.currentPager.startIndex+e+1," ")}}function G(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Employee ID"),t.qZA())}function X(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.employeeId," ")}}function tt(n,o){1&n&&(t.ynx(0),t.YNc(1,X,2,1,"td",31),t.BQk())}function et(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",49)(1,"a",50),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).navigateToMyHistory(null==c?null:c.employeeId)}),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.hij("",null==e?null:e.employeeId," ")}}function it(n,o){1&n&&t.YNc(0,et,3,1,"td",31)}function nt(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Name"),t.qZA())}function at(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.employeeName," ")}}function ot(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Activity ID"),t.qZA())}function ct(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.activityId," ")}}function lt(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Activity Name"),t.qZA())}function st(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.s9C("title",e.activityName),t.xp6(1),t.hij(" ",null==e?null:e.activityName," ")}}function rt(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Activity Tag"),t.qZA())}function pt(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.activityTag," ")}}function mt(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Participation Hours"),t.qZA())}function _t(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.participationHours," ")}}function gt(n,o){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Location"),t.qZA())}function dt(n,o){if(1&n&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.activityLocation," ")}}function ut(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"th",48)(1,"mat-checkbox",53),t.NdJ("change",function(a){return t.CHM(e),t.oxw(3).selectAll("APPROVE",a)}),t.qZA(),t._uU(2," Approve "),t.qZA()}}function ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",49)(1,"section",54)(2,"mat-checkbox",55),t.NdJ("change",function(a){const s=t.CHM(e).$implicit;return t.oxw(3).approve(a,s)}),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("checked",null==e?null:e.approvedByAdmin)}}function ft(n,o){1&n&&(t.ynx(0,52),t.YNc(1,ut,3,0,"th",30),t.YNc(2,ht,3,1,"td",31),t.BQk())}function vt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"th",48)(1,"mat-checkbox",53),t.NdJ("change",function(a){return t.CHM(e),t.oxw(3).selectAll("REJECT",a)}),t.qZA(),t._uU(2," Reject "),t.qZA()}}function Ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",49)(1,"section",54)(2,"mat-checkbox",55),t.NdJ("change",function(a){const s=t.CHM(e).$implicit;return t.oxw(3).reject(a,s)}),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("checked",null==e?null:e.rejectedByAdmin)}}function yt(n,o){1&n&&(t.ynx(0,56),t.YNc(1,vt,3,0,"th",30),t.YNc(2,Ct,3,1,"td",31),t.BQk())}function Pt(n,o){1&n&&t._UZ(0,"tr",57)}function xt(n,o){1&n&&t._UZ(0,"tr",58)}function Tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",59)(1,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveAll()}),t._uU(2,"Save"),t.qZA()()}}function At(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"table",28),t.ynx(2,29),t.YNc(3,V,2,0,"th",30),t.YNc(4,K,2,1,"td",31),t.BQk(),t.ynx(5,32),t.YNc(6,G,2,0,"th",30),t.YNc(7,tt,2,0,"ng-container",33),t.YNc(8,it,1,0,"ng-template",null,34,t.W1O),t.BQk(),t.ynx(10,35),t.YNc(11,nt,2,0,"th",30),t.YNc(12,at,2,1,"td",31),t.BQk(),t.ynx(13,36),t.YNc(14,ot,2,0,"th",30),t.YNc(15,ct,2,1,"td",31),t.BQk(),t.ynx(16,37),t.YNc(17,lt,2,0,"th",30),t.YNc(18,st,2,2,"td",38),t.BQk(),t.ynx(19,39),t.YNc(20,rt,2,0,"th",30),t.YNc(21,pt,2,1,"td",31),t.BQk(),t.ynx(22,40),t.YNc(23,mt,2,0,"th",30),t.YNc(24,_t,2,1,"td",31),t.BQk(),t.ynx(25,41),t.YNc(26,gt,2,0,"th",30),t.YNc(27,dt,2,1,"td",31),t.BQk(),t.YNc(28,ft,3,0,"ng-container",42),t.YNc(29,yt,3,0,"ng-container",43),t.YNc(30,Pt,1,0,"tr",44),t.YNc(31,xt,1,0,"tr",45),t.qZA()(),t.TgZ(32,"div")(33,"app-pagination",46),t.NdJ("pageChange",function(a){return t.CHM(e),t.oxw().onPageChange(a)}),t.qZA()(),t.YNc(34,Tt,3,0,"div",47)}if(2&n){const e=t.MAs(9),i=t.oxw();t.xp6(1),t.Q6J("dataSource",i.pagedItems),t.xp6(6),t.Q6J("ngIf",i.role===i.roleEnum.EMPLOYEE)("ngIfElse",e),t.xp6(21),t.Q6J("ngIf",i.role!==i.roleEnum.EMPLOYEE),t.xp6(1),t.Q6J("ngIf",i.role!==i.roleEnum.EMPLOYEE),t.xp6(1),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("page",i.currentPage)("pageSize",i.pageSize)("totalItems",i.totalItems),t.xp6(1),t.Q6J("ngIf",i.role!==i.roleEnum.EMPLOYEE)}}let I=(()=>{class n{constructor(e,i,a,c,s,m,x,A,Et){this.route=e,this.apiService=i,this.filterService=a,this.router=c,this.storageService=s,this.dialog=m,this.pagerService=x,this.toastr=A,this.communicationService=Et,this.displayedColumns=["No","Employee ID","Name","Activity Id","Activity Name","Activity Tag","Participation Hours","Location","Approve","Reject"],this.pager={},this.pagedItems=[],this.currentPage=1,this.totalItems=0,this.pageSize=5,this.currentPager={},this.searchControl=new C.NI(""),this.isSearch=!1,this.isDashboardDetails=!1,this.role=this.storageService.getData("Role"),this.role==this.roleEnum.EMPLOYEE&&this.displayedColumns.splice(-2)}get roleEnum(){return d.G}ngOnInit(){this.subScription=this.filterService.getdrpdwnValues().subscribe(e=>{e&&("/participation/participation-list"==this.apiService.currentRouteUrl||this.apiService.currentRouteUrl.includes("participation/participation-list"))&&(this.globalSearchParam=e,this.currentPage=1,this.route.paramMap.subscribe(i=>{const a=(null==i?void 0:i.get("activityId"))?atob(null==i?void 0:i.get("activityId")):"",c=(null==i?void 0:i.get("activityType"))?atob(null==i?void 0:i.get("activityType")):"";a&&c&&(this.activityId=a,this.activityType=c,this.getParicitpationList(a,"initial"))}),this.route.queryParams.subscribe(i=>{(null==i?void 0:i.dashboardDetails)&&atob(null==i?void 0:i.dashboardDetails)&&(this.isDashboardDetails=!0,this.getParicitpationList("","initial"))}),!this.activityId&&!this.activityType&&!this.isDashboardDetails&&(this.globalSearchParam=e,this.getParicitpationList("","initial")))})}ngOnDestroy(){this.subScription&&this.subScription.unsubscribe()}getParicitpationList(e,i){this.searchParam=e?`activityUUID=${e.toString().trim()}`:this.isSearch?`fieldValueToSearch=${this.searchControl.value.trim()}:${this.globalSearchParam}`:this.globalSearchParam;let a=(new u.LE).set("searchCriteria",this.searchParam.toString().trim()).set("pageNo",this.currentPage).set("pageSize",this.pageSize);this.isDashboardDetails&&(a=a.append("dashBoardDetails",!0)),this.activityType&&(a=a.append("activityType",this.activityType));const c=`${_.J.getParticipantsUrl()}?${a.toString().trim()}`;this.apiService.get(c).subscribe({next:s=>{this.totalItems=s.data.totalElements,s.data.employeeActivityHistories&&s.data.employeeActivityHistories.length&&(this.setPage(this.currentPage,s.data.employeeActivityHistories,i),this.activityId)&&this.apiService.viewBreadCrumb$.next({status:!0,label:"Participation",activityName:s.data.employeeActivityHistories[0].activityName})},error:()=>{this.totalItems=0,this.setPage(1,[],"normal")},complete:()=>{}})}setPage(e,i,a){"initial"==a&&(this.currentPager=this.pagerService.getPager(this.totalItems,e,this.pageSize)),this.pager=this.pagerService.getPager(this.totalItems,e,this.pageSize),this.currentPage=e,this.pagedItems=i}onPageChange(e){e.pager&&(this.currentPager=e.pager,this.currentPage=this.currentPager.currentPage,this.getParicitpationList(this.activityId?this.activityId:"","normal"))}selectAll(e,i){"APPROVE"===e?this.pagedItems.map(a=>{a.approvedByAdmin=i.checked,a.rejectedByAdmin=!1}):"REJECT"===e&&this.pagedItems.map(a=>{a.rejectedByAdmin=i.checked,a.approvedByAdmin=!1})}saveAll(){this.dialog.open(r.z,{width:"470px",data:{heading:"Save Participation",message:"Are you sure you want to Save ?"}}).afterClosed().subscribe(i=>{i&&this.saveApplicantsApi()})}saveApplicantsApi(){const e=[];this.pagedItems.forEach(a=>{e.push({employeeId:a.employeeId,activityUUID:a.activityUUID,employeeName:a.employeeName,activityTag:a.activityTag,activityLocation:a.activityLocation,participationHours:a.participationHours,approvedByAdmin:a.approvedByAdmin,rejectedByAdmin:a.rejectedByAdmin,employeeActivityStatus:a.employeeActivityStatus})});const i=`${_.J.activityApprovrOrRejectUrl()}`;this.apiService.post(e,i).subscribe(a=>{a&&(this.toastr.success("Participation Saved"),this.getParicitpationList(this.activityId,"normal"))},()=>{this.toastr.error("Something went wrong!"),this.getParicitpationList(this.activityId,"normal")})}approve(e,i){1==e.checked&&this.dialog.open(r.z,{width:"470px",data:{heading:"Aprrove Participation?",message:"Are you sure you want to Approve ?"}}).afterClosed().subscribe(c=>{c?this.approveOrRejectToApi(e.checked,"approve",i):this.getParicitpationList(this.activityId,"normal")})}reject(e,i){1==e.checked&&this.dialog.open(r.z,{width:"250px",data:{heading:"Reject Participation?",message:"Are you sure you want to Reject ?"}}).afterClosed().subscribe(c=>{c?this.approveOrRejectToApi(e.checked,"reject",i):this.getParicitpationList(this.activityId,"normal")})}downloadParticipationCsv(){let e=(new u.LE).set("searchCriteria",this.searchParam.toString().trim()).set("category","Participants");this.isDashboardDetails&&(e=e.append("dashBoardDetails",!0));const i=`${h.K.downloadCsvUrl()}?${e}`;this.communicationService.post(i,"",{responseType:"text"}).subscribe({next:a=>{if(a){const c=new Blob([a],{type:"text/csv"}),s=window.URL.createObjectURL(c),m=document.createElement("a");m.href=s,m.download=`${Date.now()}-participants.csv`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(s)}},error:a=>{this.toastr.error(a)},complete:()=>{}})}approveOrRejectToApi(e,i,a){const c=this.returnAproveOrRejctBody(a,i,e),s=`${_.J.activityApprovrOrRejectUrl()}`;this.apiService.post([c],s).subscribe(m=>{m&&("approve"==i?(this.toastr.success("Participant Approved"),this.getParicitpationList(this.activityId,"normal")):(this.toastr.error("Participant Rejected"),this.getParicitpationList(this.activityId,"normal")))},()=>{this.toastr.error("Something went wrong!"),this.getParicitpationList(this.activityId,"normal")})}returnAproveOrRejctBody(e,i,a){return{employeeId:e.employeeId,activityUUID:e.activityUUID,employeeName:e.employeeName,activityTag:e.activityTag,activityLocation:e.activityLocation,participationHours:e.participationHours,approvedByAdmin:"approve"==i&&a,rejectedByAdmin:"reject"==i&&a,employeeActivityStatus:e.employeeActivityStatus}}searchParticipation(){this.searchControl.value&&(this.isSearch=!0,this.currentPage=1,this.getParicitpationList("","initial"))}closeSearch(){this.searchControl.setValue(""),this.isSearch=!1,this.currentPage=1,this.getParicitpationList("","initial")}onChangeState(){this.searchControl.value||(this.isSearch=!1,this.currentPage=1,this.getParicitpationList("","initial"))}uploadCsv(){this.dialog.open(B,{width:"470px",data:{url:`${_.J.uploadParticipantsUrl()}`}}).afterClosed().subscribe(i=>{i&&this.getParicitpationList("","initial")})}navigateToMyHistory(e){this.router.navigate(["/activity"],{queryParams:{empId:btoa(e)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.gz),t.Y36(k.s),t.Y36(Y.Z),t.Y36(f.F0),t.Y36(R.C),t.Y36(P.uw),t.Y36(J.e),t.Y36(b._W),t.Y36(L.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-participation-list"]],decls:23,vars:6,consts:[[1,"page__wrapper"],[1,"content-section"],[1,"container-fluid","page__content-block"],[1,"page__header"],[1,"page__tabContainer"],[1,"page__heading"],[1,"page__rightColumn","participation"],["type","button","class","btn btn-grey",3,"click",4,"ngIf"],["type","button","class","btn btn-grey",3,"disabled","click",4,"ngIf"],[1,"example-form"],["appearance","outline",1,"m-0","p-0"],[1,"flbx-stretch"],["type","text","matInput","",3,"formControl","keyup.enter","change"],[1,"tb-search-ico"],["class","cancel","matSuffix","",3,"click",4,"ngIf"],["matSuffix","",3,"click"],["class","document-listing",4,"ngIf","ngIfElse"],["showData",""],["type","button",1,"btn","btn-grey",3,"click"],["src","assets\\images\\upload.svg","alt",""],["type","button",1,"btn","btn-grey",3,"disabled","click"],["src","assets\\images\\download.svg","alt",""],["matSuffix","",1,"cancel",3,"click"],[1,"document-listing"],[1,"no-data-box"],[1,"no-data"],["src","assets\\images\\activities\\nodata.png","alt","no data"],[1,"common-table"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","No"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Employee ID"],[4,"ngIf","ngIfElse"],["withLink",""],["matColumnDef","Name"],["matColumnDef","Activity Id"],["matColumnDef","Activity Name"],["mat-cell","","class","act-name",3,"title",4,"matCellDef"],["matColumnDef","Activity Tag"],["matColumnDef","Participation Hours"],["matColumnDef","Location"],["matColumnDef","Approve",4,"ngIf"],["matColumnDef","Reject",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageSize","totalItems","pageChange"],["class","d-flex justify-content-end",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["href","javascript:void(0);",3,"click"],["mat-cell","",1,"act-name",3,"title"],["matColumnDef","Approve"],[3,"change"],[1,"check-section"],[1,"example-margin",3,"checked","change"],["matColumnDef","Reject"],["mat-header-row",""],["mat-row",""],[1,"d-flex","justify-content-end"],[1,"btn","btn-red",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6,"Participation Details"),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,Q,3,0,"button",7),t.YNc(9,$,3,1,"button",8),t.TgZ(10,"form",9)(11,"mat-form-field",10)(12,"mat-label"),t._uU(13,"Employee Id & Name"),t.qZA(),t.TgZ(14,"div",11)(15,"input",12),t.NdJ("keyup.enter",function(){return i.searchParticipation()})("change",function(){return i.onChangeState()}),t.qZA(),t.TgZ(16,"span",13),t.YNc(17,q,2,0,"mat-icon",14),t.TgZ(18,"mat-icon",15),t.NdJ("click",function(){return i.searchParticipation()}),t._uU(19,"search"),t.qZA()()()()()()(),t.YNc(20,W,6,0,"div",16),t.YNc(21,At,35,11,"ng-template",null,17,t.W1O),t.qZA()()()),2&e){const a=t.MAs(22);t.xp6(8),t.Q6J("ngIf",i.role!==i.roleEnum.EMPLOYEE),t.xp6(1),t.Q6J("ngIf",i.role!==i.roleEnum.EMPLOYEE),t.xp6(6),t.Q6J("formControl",i.searchControl),t.xp6(2),t.Q6J("ngIf",null==i.searchControl?null:i.searchControl.value),t.xp6(3),t.Q6J("ngIf",0===(null==i.pagedItems?null:i.pagedItems.length))("ngIfElse",a)}},directives:[g.O5,C._Y,C.JL,C.F,T.KE,T.hX,z.Nt,C.Fj,C.JJ,C.oH,j.Hw,T.R9,v.BZ,v.w1,v.fO,v.ge,v.Dz,v.ev,H.oG,v.as,v.XQ,v.nj,v.Gk,F.Q],styles:[".page__rightColumn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;max-height:41px;width:max-content}@media screen and (max-width: 768px){.page__rightColumn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px}}.page__rightColumn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.page__rightColumn[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0!important;margin-bottom:0!important}table[_ngcontent-%COMP%]{width:100%}.act-name[_ngcontent-%COMP%]{width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}"]}),n})();const Zt=[{path:"",component:I},{path:"participation-list",data:{roles:[d.G.CADMIN,d.G.EMPLOYEE,d.G.ADMIN]},component:I},{path:"participation-list/:activityId/:activityType",component:I}];let It=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Zt)],f.Bz]}),n})();var Lt=l(8882);let bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,It,p.m,Lt.u]]}),n})()},3556:(Z,y,l)=>{l.d(y,{Q:()=>d});var g=l(5e3),p=l(6640),f=l(3585);let d=(()=>{class u{constructor(r){this.pagerService=r,this.pageChange=new g.vpe,this.pager={}}ngOnInit(){this.pager=this.pagerService.getPager(this.totalItems,this.page,this.pageSize)}ngOnChanges(r){r.totalItems&&(this.totalItems=r.totalItems.currentValue,this.pager=this.pagerService.getPager(this.totalItems,this.page,this.pageSize)),r.page&&(this.page=r.page.currentValue,this.pager=this.pagerService.getPager(this.totalItems,this.page,this.pageSize)),r.pageSize&&(this.pageSize=r.pageSize.currentValue,this.pager=this.pagerService.getPager(this.totalItems,this.page,this.pageSize))}setPage(r){this.pager=this.pagerService.getPager(this.totalItems,r,this.pageSize),this.pageChange.emit({pager:this.pager})}}return u.\u0275fac=function(r){return new(r||u)(g.Y36(p.e))},u.\u0275cmp=g.Xpm({type:u,selectors:[["app-pagination"]],inputs:{page:"page",pageSize:"pageSize",totalItems:"totalItems"},outputs:{pageChange:"pageChange"},features:[g.TTD],decls:2,vars:7,consts:[[1,"pagination","justify-content-end"],[3,"collectionSize","page","pageSize","maxSize","rotate","ellipses","boundaryLinks","pageChange"]],template:function(r,h){1&r&&(g.TgZ(0,"div",0)(1,"ngb-pagination",1),g.NdJ("pageChange",function(P){return h.pager.currentPage=P})("pageChange",function(P){return h.setPage(P)}),g.qZA()()),2&r&&(g.xp6(1),g.Q6J("collectionSize",h.totalItems)("page",h.pager.currentPage)("pageSize",h.pager.pageSize)("maxSize",3)("rotate",!0)("ellipses",!0)("boundaryLinks",!0))},directives:[f.N9],styles:[""]}),u})()},8882:(Z,y,l)=>{l.d(y,{u:()=>u});var g=l(9808),p=l(7777),f=l(3585),d=l(5e3);let u=(()=>{class _{}return _.\u0275fac=function(h){return new(h||_)},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({imports:[[g.ez,p.m,f.jF]]}),_})()}}]);