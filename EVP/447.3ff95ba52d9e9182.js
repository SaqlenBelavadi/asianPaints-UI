"use strict";(self.webpackChunkEVP=self.webpackChunkEVP||[]).push([[447],{2447:(vt,M,c)=>{c.r(M),c.d(M,{GalleryModule:()=>bt});var p=c(9808),F=c(1083),D=c(5861),d=c(520),h=c(2340);const __getAllImagesUrl=()=>`${h.N.rootUrl}${h.N.apiPath}/Images`,__getImagesUrl=()=>`${h.N.rootUrl}${h.N.apiPath}/Activity/Image`,__getAllFeedbacksUrl=()=>`${h.N.rootUrl}${h.N.apiPath}/Activity/Feedback/Gallery`,__publishOrUnpublishFeedback=()=>`${h.N.rootUrl}${h.N.apiPath}/Activity/Feedback/PublishOrUnpublish`,__deleteFeedbacksFromGalleryUrl=()=>`${h.N.rootUrl}${h.N.apiPath}/Activity/Feedback/Gallery`;var C=c(9202),G=c(5209),e=c(5e3),x=c(5384),y=c(3122),I=c(4617),A=c(1617),z=c(2279),Z=c(3251),g=c(3075),S=c(58),f=c(1821),j=c(8195),P=c(6640),k=c(4383),O=c(8966),T=c(7446),L=c(7238),N=c(3556);function $(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",10),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return a.selectAllImages(a.themeName)}),e._uU(1,"Select All"),e.qZA()}}function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeImages()}),e._UZ(1,"img",12),e._uU(2," Delete "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.enableOrDisableBtn),e.xp6(1),e.Q6J("matTooltip","Delete")("matTooltipPosition","above")}}function R(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).publishOrUnpublishImages(!1)}),e._UZ(1,"img",15),e._uU(2," Unpublish "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.enableOrDisableBtn),e.xp6(1),e.Q6J("matTooltip","Unpublish")("matTooltipPosition","above")}}function H(i,s){if(1&i&&(e.ynx(0),e.YNc(1,R,3,3,"button",13),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.role!==t.roleEnum.EMPLOYEE)}}function W(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).publishOrUnpublishImages(!0)}),e._UZ(1,"img",16),e._uU(2," Publish "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.enableOrDisableBtn),e.xp6(1),e.Q6J("matTooltip","Publish")("matTooltipPosition","above")}}function X(i,s){if(1&i&&e.YNc(0,W,3,3,"button",13),2&i){const t=e.oxw();e.Q6J("ngIf",t.role!==t.roleEnum.EMPLOYEE)}}function V(i,s){if(1&i&&e._UZ(0,"mat-checkbox",39),2&i){const t=e.oxw().index;e.Q6J("formControlName",t)}}function K(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,o=e.oxw(2);return o.removeSingleImage(null==o.pagedItems[o.themeName]?null:o.pagedItems[o.themeName].images[a])}),e.qZA()}2&i&&e.Q6J("matTooltip","Delete")("matTooltipPosition","above")}function ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,o=e.oxw(2);return o.publishOrUnpublishSingleImage(null==o.pagedItems[o.themeName]?null:o.pagedItems[o.themeName].images[a],!1)}),e.qZA()}2&i&&e.Q6J("matTooltip","Unpublish")("matTooltipPosition","above")}function te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,o=e.oxw(2);return o.publishOrUnpublishSingleImage(null==o.pagedItems[o.themeName]?null:o.pagedItems[o.themeName].images[a],!0)}),e.qZA()}2&i&&e.Q6J("matTooltip","Publish")("matTooltipPosition","above")}function ne(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21),e._UZ(3,"img",22),e.TgZ(4,"section",23),e.YNc(5,V,1,1,"mat-checkbox",24),e.qZA(),e.TgZ(6,"div",25)(7,"div",26),e._UZ(8,"img",27),e.TgZ(9,"p"),e._uU(10),e.qZA()(),e.TgZ(11,"div",28)(12,"h3",29),e._uU(13),e.qZA(),e.TgZ(14,"div",30)(15,"div")(16,"h6",31),e._uU(17),e.qZA(),e.TgZ(18,"p",32),e._uU(19),e.qZA()(),e.TgZ(20,"div",33),e.YNc(21,K,1,2,"img",34),e.TgZ(22,"img",35),e.NdJ("click",function(){const o=e.CHM(t).index,l=e.oxw(2);return l.preview(null==l.pagedItems[l.themeName]||null==l.pagedItems[l.themeName].images[o]?null:l.pagedItems[l.themeName].images[o].imageUrl)}),e.qZA(),e.YNc(23,ee,1,2,"img",36),e.YNc(24,te,1,2,"img",37),e.TgZ(25,"img",38),e.NdJ("click",function(){const o=e.CHM(t).index,l=e.oxw(2);return l.downloadImg(null==l.pagedItems[l.themeName]||null==l.pagedItems[l.themeName].images[o]?null:l.pagedItems[l.themeName].images[o].imageUrl)}),e.qZA()()()()()()()()}if(2&i){const t=s.index,n=e.oxw(2);e.xp6(3),e.Q6J("src",null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].imageUrl,e.LSH),e.xp6(2),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(5),e.Oqu(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].activityLocation),e.xp6(2),e.s9C("title",(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].activityId)+" - "+(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].activityName)),e.xp6(1),e.hij(" ",(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].activityId)+" - "+(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].activityName)," "),e.xp6(4),e.hij(" ",null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].uploadedBy," "),e.xp6(2),e.hij(" ",null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].uploadedDate," "),e.xp6(2),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("matTooltip","Preview")("matTooltipPosition","above"),e.xp6(1),e.Q6J("ngIf",(null==n.pagedItems[n.themeName]||null==n.pagedItems[n.themeName].images[t]?null:n.pagedItems[n.themeName].images[t].published)&&n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("ngIf",!(null!=n.pagedItems[n.themeName]&&null!=n.pagedItems[n.themeName].images[t]&&n.pagedItems[n.themeName].images[t].published)&&n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("matTooltip","Download")("matTooltipPosition","above")}}function ie(i,s){if(1&i&&(e.ynx(0,17),e.YNc(1,ne,26,14,"div",18),e.BQk()),2&i){const t=e.oxw();e.Q6J("formGroup",t.galleryForm),e.xp6(1),e.Q6J("ngForOf",t.imageFormArray.controls)}}let U=(()=>{class i{constructor(t,n,a,o,l,r,m,u){this.apiService=t,this.filterService=n,this.pagerService=a,this.toastr=o,this.fb=l,this.dialog=r,this.storageService=m,this.httpClient=u,this.currentPage=0,this.totalItems=0,this.pager={},this.pageLimit=4,this.isSelectedAllImg=!1,this.isSelectedAllFeedback=!1,this.galleryForm=this.fb.group({images:this.fb.array([])}),this.enableOrDisableBtn=!1}get roleEnum(){return C.G}ngOnInit(){this.role=this.storageService.getData("Role"),this.apiService.isProfileSwitched().subscribe(t=>{t&&(this.role=this.storageService.getData("Role"))}),this.getInitialData(),this.imageFormArray.valueChanges.subscribe(t=>{this.enableOrDisableBtn=!!t.some(a=>!0===a)})}getInitialData(){this.imageFormArray.clear(),Object.keys(this.gallerDetails).length>0&&(this.currentPage=this.gallerDetails[this.themeName].pageNo,this.totalItems=this.gallerDetails[this.themeName].totalElements,this.pager=this.pagerService.getPager(this.gallerDetails[this.themeName].totalElements,this.currentPage,this.pageLimit),this.gallerDetails[this.themeName].images=this.gallerDetails[this.themeName].images.length>0?this.gallerDetails[this.themeName].images.slice(this.pager.startIndex,this.pager.endIndex+1):[],this.pagedItems=this.gallerDetails,this.addImagesToForm())}ngOnChanges(t){var n,a;(null===(n=null==t?void 0:t.gallerDetails)||void 0===n?void 0:n.firstChange)||((null==t?void 0:t.gallerDetails)&&(this.gallerDetails=null),this.gallerDetails=null===(a=null==t?void 0:t.gallerDetails)||void 0===a?void 0:a.currentValue,this.getInitialData())}get imageFormArray(){return this.galleryForm.controls.images}onPageChange(t){t.pager&&(this.pager=t.pager,this.currentPage=this.pager.currentPage,this.fetchGalleryDetails())}fetchGalleryDetails(){let t="",n=0;for(let[l,r]of this.filterService.globalFilterArr.entries())0!==n&&(t+=":"),t+="themeName"==l?`themeName=${this.themeName}`.toString().trim():`${r}`.toString().trim(),n++;const a=(new d.LE).set("imageType","ALL").set("searchCriteria",t).set("pageNo",this.currentPage).set("pageSize",this.pageLimit),o=`${__getAllImagesUrl()}?${a} `;this.apiService.get(o).subscribe({next:l=>{l&&this.setPage(this.currentPage,l.data)},error:l=>{this.toastr.error(l)},complete:()=>{}})}setPage(t,n){Object.keys(n[this.type]).length>0?(this.totalItems=n[this.type][this.themeName].totalElements,this.pager=this.pagerService.getPager(n[this.type][this.themeName].totalElements,t,this.pageLimit),this.pagedItems=n[this.type],this.imageFormArray.clear(),this.addImagesToForm()):(this.totalItems=0,this.pager=this.pagerService.getPager(0,1,this.pageLimit),this.pagedItems=[],this.imageFormArray.clear())}selectAllImages(t){this.isSelectedAllImg=!this.isSelectedAllImg,this.pagedItems[t].images.map((n,a)=>{this.updateImageFormArray(a,this.isSelectedAllImg)})}updateImageFormArray(t,n){this.imageFormArray.at(t).patchValue(n)}addImagesToForm(){for(let t of this.pagedItems[this.themeName].images){const n=new g.NI(!1);this.imageFormArray.push(n)}}removeImageForm(t){this.imageFormArray.removeAt(t)}publishOrUnpublishImages(t){const n=[];this.pagedItems[this.themeName].images.map((a,o)=>{this.imageFormArray.value[o]&&n.push({imageName:a.imageName,activityName:a.activityId,publishOrUnpublish:t})}),(null==n?void 0:n.length)&&this.publishOrUnpublishImagesToApi(n,t)}publishOrUnpublishSingleImage(t,n){this.publishOrUnpublishImagesToApi([{imageName:t.imageName,activityName:t.activityId,publishOrUnpublish:n}],n)}publishOrUnpublishImagesToApi(t,n){const a=S.J.imagesUrl();this.dialog.open(f.z,{width:"470px",data:{heading:(n?"Publish":"Unpublish")+" Images?",message:`Are you sure you want to ${n?"Publish":"Unpublish"} the images?`}}).afterClosed().subscribe(l=>{l&&this.apiService.post(t,`${a}/PublishOrUnPublish`).subscribe(()=>{this.toastr.success(n?"Successfully Published Images":"Successfully Unpublished Images"),this.currentPage=1,this.fetchGalleryDetails()})})}removeImages(){const t=[];this.pagedItems[this.themeName].images.map((n,a)=>{this.imageFormArray.value[a]&&t.push({imageName:n.imageName,imageType:"EMPLOYEE_UPLOAD",softDelete:!0,activityId:n.activityId})}),(null==t?void 0:t.length)&&this.removeImagesToApi(t)}removeSingleImage(t){this.removeImagesToApi([{imageName:t.imageName,imageType:"EMPLOYEE_UPLOAD",softDelete:!0,activityId:t.activityId}])}removeImagesToApi(t){this.dialog.open(f.z,{width:"470px",data:{heading:"Delete Images?",message:"Are you sure you want to delete the images?"}}).afterClosed().subscribe(a=>{if(a){const o=S.J.imagesUrl();this.apiService.delete(t,`${o}`).subscribe(l=>{this.toastr.success((null==l?void 0:l.data)?l.data:(null==l?void 0:l.message)?l.message:"Image deleted successfully from gallery"),this.currentPage=1,this.fetchGalleryDetails()})}})}getShortName(t){return t.split(" ").map(n=>n[0]).join("")}downloadImg(t){const n=t.substr(t.lastIndexOf("/")+1);this.httpClient.get(t,{responseType:"blob"}).subscribe(a=>{const o=new Blob([a],{type:a.type});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(o);const l=window.URL.createObjectURL(o),r=document.createElement("a");r.href=l,r.download=n,r.dispatchEvent(new MouseEvent("click",{cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(l),r.remove()},100)})}preview(t){this.dialog.open(j.E,{panelClass:"dialog-container",disableClose:!0,data:{url:t}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.s),e.Y36(y.Z),e.Y36(P.e),e.Y36(k._W),e.Y36(g.qu),e.Y36(O.uw),e.Y36(I.C),e.Y36(d.eN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gallery-by-themewise"]],inputs:{gallerDetails:"gallerDetails",themeName:"themeName",type:"type"},features:[e.TTD],decls:13,vars:8,consts:[[1,"row"],[1,"check-section","mb-3"],[1,"select-all"],["class","example-margin",3,"change",4,"ngIf"],[1,"twobtn-group"],["type","button","class","btn btn-red",3,"disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["unpublish",""],[3,"formGroup",4,"ngIf"],[3,"page","pageSize","totalItems","pageChange"],[1,"example-margin",3,"change"],["type","button",1,"btn","btn-red",3,"disabled","click"],["src","assets\\images\\activities\\delete.svg","alt","",3,"matTooltip","matTooltipPosition"],["type","button","class","btn btn-grey h-100",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-grey","h-100",3,"disabled","click"],["src","assets/images/unpublished-grey.svg","alt","",3,"matTooltip","matTooltipPosition"],["src","assets/images/upload.svg","alt","",3,"matTooltip","matTooltipPosition"],[3,"formGroup"],["class","col-lg-3 mb-3","formArrayName","images",4,"ngFor","ngForOf"],["formArrayName","images",1,"col-lg-3","mb-3"],[1,"activity-card"],[1,"activity-img-sec"],[1,"activity-img",3,"src"],[1,"check-section","ov-chkbx"],["class","example-margin",3,"formControlName",4,"ngIf"],[1,"act-img-overlay-sec"],[1,"card-top","icon-text"],["src","assets\\images\\map.svg","alt",""],[1,"act-img-bottom"],[3,"title"],[1,"gall-details"],[1,"act-date","icon-text"],[1,"act-time","icon-text"],[1,"action"],["src","assets/images/trash-white.svg","alt","delete","class","act-bt",3,"matTooltip","matTooltipPosition","click",4,"ngIf"],["src","assets\\images\\preview.svg",1,"act-bt",3,"matTooltip","matTooltipPosition","click"],["src","assets/images/unpublished.svg","class","act-bt","alt","unpublish",3,"matTooltip","matTooltipPosition","click",4,"ngIf"],["src","assets/images/upload-white.svg","class","act-bt","alt","publish",3,"matTooltip","matTooltipPosition","click",4,"ngIf"],["src","assets\\images\\download-white.svg",1,"act-bt",3,"matTooltip","matTooltipPosition","click"],[1,"example-margin",3,"formControlName"],["src","assets/images/trash-white.svg","alt","delete",1,"act-bt",3,"matTooltip","matTooltipPosition","click"],["src","assets/images/unpublished.svg","alt","unpublish",1,"act-bt",3,"matTooltip","matTooltipPosition","click"],["src","assets/images/upload-white.svg","alt","publish",1,"act-bt",3,"matTooltip","matTooltipPosition","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Images"),e.qZA(),e.TgZ(3,"section",1)(4,"div",2),e.YNc(5,$,2,0,"mat-checkbox",3),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,q,3,3,"button",5),e.YNc(8,H,2,1,"ng-container",6),e.YNc(9,X,1,1,"ng-template",null,7,e.W1O),e.qZA()(),e.YNc(11,ie,2,2,"ng-container",8),e.qZA(),e.TgZ(12,"app-pagination",9),e.NdJ("pageChange",function(o){return n.onPageChange(o)}),e.qZA()),2&t){const a=e.MAs(10);e.xp6(5),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(2),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("ngIf","publishedImages"===n.type)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",null==n.pagedItems[n.themeName]?null:n.pagedItems[n.themeName].images.length),e.xp6(1),e.Q6J("page",n.currentPage)("pageSize",n.pageLimit)("totalItems",n.totalItems)}},directives:[p.O5,T.oG,L.gM,g.JL,g.sg,p.sg,g.CE,g.JJ,g.u,N.Q],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}"]}),i})();var ae=c(2067),se=c(7925),E=c(7603),oe=c(3392);function le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",11),e.NdJ("change",function(){return e.CHM(t),e.oxw().selectAllfeedbacks()}),e._uU(1,"Select All"),e.qZA()}}function ce(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.removeFeedbacks(a.themeName)}),e._UZ(1,"img",13),e._uU(2," Delete "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.enableOrDisableBtn)}}function re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.publishOrUnpublishFeedbacks(!1,a.themeName)}),e._UZ(1,"img",16),e._uU(2," Unpublish "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.enableOrDisableBtn)}}function me(i,s){if(1&i&&(e.ynx(0),e.YNc(1,re,3,1,"button",14),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.role!==t.roleEnum.EMPLOYEE)}}function ge(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.publishOrUnpublishFeedbacks(!0,a.themeName)}),e._UZ(1,"img",17),e._uU(2," Publish "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.enableOrDisableBtn)}}function pe(i,s){if(1&i&&e.YNc(0,ge,3,1,"button",14),2&i){const t=e.oxw();e.Q6J("ngIf",t.role!==t.roleEnum.EMPLOYEE)}}function de(i,s){if(1&i&&e._UZ(0,"mat-checkbox",34),2&i){const t=e.oxw().index;e.Q6J("formControlName",t)}}function he(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,o=e.oxw(2);return o.openFeedbackDetails(null==o.pagedItems[o.themeName][o.type]?null:o.pagedItems[o.themeName][o.type].activityFeedback[a])}),e._uU(1,"Continue Reading"),e.qZA()}}function _e(i,s){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"h3",25),e._uU(8),e.qZA(),e.TgZ(9,"p",26),e._uU(10),e.ALo(11,"date"),e.qZA()()(),e.TgZ(12,"div",27)(13,"section",28),e.YNc(14,de,1,1,"mat-checkbox",29),e.qZA()()(),e.TgZ(15,"div",30),e._UZ(16,"app-star-rating",31),e.qZA(),e.TgZ(17,"div",32)(18,"h2"),e._uU(19),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.YNc(22,he,2,0,"a",33),e.qZA()()()),2&i){const t=s.index,n=e.oxw(2);let a,o;e.xp6(5),e.hij(" ",n.getShortName(null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].fullName)," "),e.xp6(3),e.hij(" ",null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].fullName," "),e.xp6(2),e.hij(" ",e.xi3(11,8,null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].createdDate,"dd-MM-YYYY")," "),e.xp6(4),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(2),e.s9C("value",null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].rating),e.xp6(3),e.hij(" ",null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].activityName," "),e.xp6(2),e.hij(" ",null==(a=n.returnFeedbackToShort(null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].feedback))?null:a.textContent," "),e.xp6(1),e.Q6J("ngIf",null==(o=n.returnFeedbackToShort(null==n.pagedItems[n.themeName][n.type]||null==n.pagedItems[n.themeName][n.type].activityFeedback[t]?null:n.pagedItems[n.themeName][n.type].activityFeedback[t].feedback))?null:o.show)}}function ue(i,s){if(1&i&&(e.ynx(0,18),e.YNc(1,_e,23,11,"div",19),e.BQk()),2&i){const t=e.oxw();e.Q6J("formGroup",t.feedbackForm),e.xp6(1),e.Q6J("ngForOf",t.feedbackFormArray.controls)}}let J=(()=>{class i{constructor(t,n,a,o,l,r,m,u,b){this.apiService=t,this.filterService=n,this.pagerService=a,this.toastr=o,this.fb=l,this.dialog=r,this.storageService=m,this.communicationService=u,this._overlaySidePanelService=b,this.currentPage=0,this.totalItems=0,this.pager={},this.pagedItems={},this.pageLimit=4,this.isSelectedAllFeedback=!1,this.feedbackForm=this.fb.group({feedbacks:this.fb.array([])}),this.enableOrDisableBtn=!1}get roleEnum(){return C.G}ngOnInit(){this.role=this.storageService.getData("Role"),this.apiService.isProfileSwitched().subscribe(t=>{t&&(this.role=this.storageService.getData("Role"))}),this.getInitialData(),this.feedbackFormArray.valueChanges.subscribe(t=>{this.enableOrDisableBtn=!!t.some(a=>!0===a)}),this.feedbackCloseSubscription=this.apiService.feedbackPanelClose$.subscribe(t=>{console.log("gallery feedback"),t&&t.status&&this.dialog.open(se.F).afterClosed().subscribe(a=>{a&&this.fetchFeedbackDetails(this.themeName)})})}ngOnChanges(t){var n,a;(null===(n=null==t?void 0:t.feedbackDetails)||void 0===n?void 0:n.firstChange)||((null==t?void 0:t.feedbackDetails)&&(this.feedbackDetails=null),this.feedbackDetails=null===(a=null==t?void 0:t.feedbackDetails)||void 0===a?void 0:a.currentValue,this.getInitialData())}ngOnDestroy(){this.feedbackCloseSubscription&&this.feedbackCloseSubscription.unsubscribe()}getInitialData(){this.feedbackDetails&&Object.keys(this.feedbackDetails[this.themeName][this.type].activityFeedback).length>0&&(this.currentPage=this.feedbackDetails[this.themeName][this.type].pageNo,this.totalItems=this.feedbackDetails[this.themeName][this.type].totalElements,this.pager=this.pagerService.getPager(this.totalItems,this.currentPage,this.pageLimit),this.pagedItems=this.feedbackDetails,this.feedbackFormArray.clear(),this.addFeedbackToForm())}get feedbackFormArray(){return this.feedbackForm.controls.feedbacks}onPageChange(t,n){t.pager&&(this.pager=t.pager,this.currentPage=this.pager.currentPage,this.fetchFeedbackDetails(n))}fetchFeedbackDetails(t){let n="",a=0;for(let[r,m]of this.filterService.globalFilterArr.entries())0!==a&&(n+=":"),n+="themeName"==r?`themeName=${t}`.toString().trim():`${m}`.toString().trim(),a++;const o=(new d.LE).set("searchCriteria",n).set("pageNo",this.currentPage).set("pageSize",this.pageLimit),l=`${__getAllFeedbacksUrl()}?${o}`;this.communicationService.get(l,{responseType:"text"},!0).subscribe({next:r=>{if(r){const m=JSON.parse(r);m&&this.setPage(this.currentPage,Object.assign({},m.data))}},error:r=>{this.toastr.error(r)},complete:()=>{}})}setPage(t,n){this.pager=this.pagerService.getPager(n[this.themeName][this.type].activityFeedback.totalElements,t,this.pageLimit),this.pagedItems=n,this.feedbackFormArray.clear(),this.addFeedbackToForm()}selectAllfeedbacks(){this.isSelectedAllFeedback=!this.isSelectedAllFeedback,this.pagedItems[this.themeName][this.type].activityFeedback.map((t,n)=>{this.updateFeedbackFormArray(n,this.isSelectedAllFeedback)})}updateFeedbackFormArray(t,n){this.feedbackFormArray.at(t).patchValue(n)}addFeedbackToForm(){for(let t of this.pagedItems[this.themeName][this.type].activityFeedback){const n=new g.NI(!1);this.feedbackFormArray.push(n)}}removeFeedbackForm(t){this.feedbackFormArray.removeAt(t)}publishOrUnpublishFeedbacks(t,n){const a=[];this.pagedItems[this.themeName][this.type].activityFeedback.map((o,l)=>{this.feedbackFormArray.value[l]&&a.push(o.feedbackId)}),(null==a?void 0:a.length)&&this.publishOrUnpublishFeedbacksToApi(a,t,n)}publishOrUnpublishFeedbacksToApi(t,n,a){const o=__publishOrUnpublishFeedback();this.dialog.open(f.z,{width:"470px",data:{heading:(n?"Publish":"Unpublish")+" Feedbacks?",message:`Are you sure you want to ${n?"Publish":"Unpublish"} the feedback?`}}).afterClosed().subscribe(r=>{if(r){const m=(new d.LE).set("Id",t.toString()).set("status",n?"Published":"UnPublished");this.apiService.post({},`${o}?${m.toString().trim()}`).subscribe(()=>{this.toastr.success(n?"Successfully Published feedbacks":"Successfully Unpublished feedbacks"),this.currentPage=1,this.fetchFeedbackDetails(a)})}})}removeFeedbacks(t){const n=[];this.pagedItems[this.themeName][this.type].activityFeedback.map((a,o)=>{this.feedbackFormArray.value[o]&&n.push(a.feedbackId)}),(null==n?void 0:n.length)&&this.removeFeedbacksToApi(n,t)}removeSingleFeedback(t,n){this.removeFeedbacksToApi(t,n)}removeFeedbacksToApi(t,n){this.dialog.open(f.z,{width:"470px",data:{heading:"Delete Feedbacks?",message:"Are you sure you want to delete the feedbacks?"}}).afterClosed().subscribe(o=>{if(o){const l=(new d.LE).set("Id",t.toString()),r=`${__deleteFeedbacksFromGalleryUrl()}?${l.toString()}`;this.apiService.delete({},`${r}`).subscribe(m=>{this.toastr.success(m.data?null==m?void 0:m.data:(null==m?void 0:m.message)?m.message:"Activity feedback deleted from gallery successfully"),this.currentPage=1,this.fetchFeedbackDetails(n)})}})}getShortName(t){return t?t.split(" ").map(n=>n[0]).join(""):""}returnFeedbackToShort(t){const a=t.trim();return{textContent:a.length>95?a.slice(0,95)+"...":a,show:a.length>95}}openFeedbackDetails(t){this.dialog.open(ae.G,{width:"470px",data:t})}editFeedbackPanel(t){this.sideOverlayData={width:"750",label:"Edit Feedback",isEdit:!1,data:{}},this.sideOverlayData.isEdit=!1,this.apiService.isfeedbackEdit=!0,this.apiService.feedbackAddData=t,this.apiService.feedbackEditFromGallery$.next(!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.s),e.Y36(y.Z),e.Y36(P.e),e.Y36(k._W),e.Y36(g.qu),e.Y36(O.uw),e.Y36(I.C),e.Y36(E.O),e.Y36(A.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-feedback-by-themewise"]],inputs:{feedbackDetails:"feedbackDetails",themeName:"themeName",type:"type"},features:[e.TTD],decls:15,vars:8,consts:[[1,"row"],[1,"check-section","mb-3"],[1,"select-all"],["class","example-margin",3,"change",4,"ngIf"],[1,"twobtn-group"],["type","button","class","btn btn-red",3,"disabled","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["unpublish",""],[1,"swiper","row"],[3,"formGroup",4,"ngIf"],[3,"page","pageSize","totalItems","pageChange"],[1,"example-margin",3,"change"],["type","button",1,"btn","btn-red",3,"disabled","click"],["src","assets\\images\\activities\\delete.svg","alt",""],["type","button","class","btn btn-grey h-100",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-grey","h-100",3,"disabled","click"],["src","assets/images/unpublished-grey.svg","alt",""],["src","assets/images/upload.svg","alt",""],[3,"formGroup"],["class","swiper-slide col-12 col-md-3","formArrayName","feedbacks",4,"ngFor","ngForOf"],["formArrayName","feedbacks",1,"swiper-slide","col-12","col-md-3"],[1,"fdbk-wrapper"],[1,"fdbk-details","flbx-stretch"],[1,"fb-user-avtar","flbx-vac"],[1,"uname"],[1,"username"],[1,"fb-date"],[1,"flbx-vac"],[1,"select-section"],["class","example-margin",3,"formControlName",4,"ngIf"],[1,"rating-wrapper","mt-3","mb-3"],["disabled","'true'",1,"disableDiv",3,"value"],[1,"fb-content"],["href","javascript:void(0);",3,"click",4,"ngIf"],[1,"example-margin",3,"formControlName"],["href","javascript:void(0);",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Feedbacks"),e.qZA(),e.TgZ(3,"section",1)(4,"div",2),e.YNc(5,le,2,0,"mat-checkbox",3),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,ce,3,1,"button",5),e.YNc(8,me,2,1,"ng-container",6),e.YNc(9,pe,1,1,"ng-template",null,7,e.W1O),e.qZA()(),e.TgZ(11,"section")(12,"div",8),e.YNc(13,ue,2,2,"ng-container",9),e.qZA(),e.TgZ(14,"app-pagination",10),e.NdJ("pageChange",function(o){return n.onPageChange(o,n.themeName)}),e.qZA()()()),2&t){const a=e.MAs(10);e.xp6(5),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(2),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("ngIf","published"===n.type)("ngIfElse",a),e.xp6(5),e.Q6J("ngIf",n.pagedItems&&n.pagedItems[n.themeName]&&n.pagedItems[n.themeName][n.type]&&(null==n.pagedItems[n.themeName][n.type]?null:n.pagedItems[n.themeName][n.type].activityFeedback.length)),e.xp6(1),e.Q6J("page",n.currentPage)("pageSize",n.pageLimit)("totalItems",n.totalItems)}},directives:[p.O5,T.oG,g.JL,g.sg,p.sg,g.CE,g.JJ,g.u,oe.T,N.Q],pipes:[p.uU],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}.fdbk-wrapper[_ngcontent-%COMP%]{border:1px solid #dcdcdc}.fdbk-wrapper[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{padding:3px!important;line-height:.5!important}.fdbk-wrapper[_ngcontent-%COMP%]{padding:15px;height:100%}.uname[_ngcontent-%COMP%]{width:35px;height:35px;background-color:#5d417d;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px}.fb-user-avtar[_ngcontent-%COMP%]{align-items:flex-start}.flbx-stretch[_ngcontent-%COMP%]{align-items:baseline}.disableDiv[_ngcontent-%COMP%]{pointer-events:none;opacity:1}"]}),i})();function fe(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4),e._UZ(4,"img",5),e.TgZ(5,"h4"),e._uU(6,"No Records to show"),e.qZA()()()(),e.BQk())}function be(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4),e._UZ(4,"img",5),e.TgZ(5,"h4"),e._uU(6,"No Records to show"),e.qZA()()()(),e.BQk())}function ve(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-gallery-by-themewise",9),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("gallerDetails",n.publishedImages)("themeName",t)("type",n.type)}}function xe(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-feedback-by-themewise",10),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("feedbackDetails",n.feedbackItems)("themeName",t)("type","published")}}function ye(i,s){if(1&i&&(e.YNc(0,ve,2,3,"div",8),e.YNc(1,xe,2,3,"div",8)),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("ngIf",n.publishedImages&&n.publishedImages[t]&&(null==n.publishedImages[t]||null==n.publishedImages[t].images?null:n.publishedImages[t].images.length)>0),e.xp6(1),e.Q6J("ngIf",n.feedbackItems&&(null==n.feedbackItems[t]||null==n.feedbackItems[t].published?null:n.feedbackItems[t].published.activityFeedback.length)>0)}}function Ce(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e.YNc(3,be,7,0,"ng-container",0),e.YNc(4,ye,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&i){const t=s.$implicit,n=e.MAs(5),a=e.oxw(2);e.xp6(2),e.hij(" ",a.publishedImages&&a.publishedImages[t]||a.feedbackItems&&a.feedbackItems[t]?t:""," "),e.xp6(1),e.Q6J("ngIf",a.publishedImages&&0===(null==a.publishedImages[t]||null==a.publishedImages[t].images?null:a.publishedImages[t].images.length)&&a.feedbackItems&&0===(null==a.feedbackItems[t]||null==a.feedbackItems[t].published?null:a.feedbackItems[t].published.activityFeedback.length))("ngIfElse",n)}}function Ie(i,s){if(1&i&&e.YNc(0,Ce,6,3,"ng-container",6),2&i){const t=e.oxw();e.Q6J("ngForOf",t.themeNames)}}let Pe=(()=>{class i{constructor(){this.themeNames=[],this.themeImages=[]}ngOnInit(){this.publishedImages&&Object.keys(this.publishedImages).length>0&&Object.keys(this.publishedImages).map(t=>{this.themeNames.push(t)}),this.feedbackItems&&Object.keys(this.feedbackItems).length>0&&Object.keys(this.feedbackItems).map(t=>{this.feedbackItems[t].published.activityFeedback.length>0&&this.themeNames.push(t)}),this.themeNames.length>0&&(this.themeNames=[...new Set(this.themeNames)])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-published"]],inputs:{publishedImages:"publishedImages",type:"type",feedbackItems:"feedbackItems"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["second",""],[1,"document-listing"],[1,"no-data-box"],[1,"no-data"],["src","assets\\images\\activities\\nodata.png","alt","no data"],[4,"ngFor","ngForOf"],["showData",""],[4,"ngIf"],[3,"gallerDetails","themeName","type"],[3,"feedbackDetails","themeName","type"]],template:function(t,n){if(1&t&&(e.YNc(0,fe,7,0,"ng-container",0),e.YNc(1,Ie,1,1,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",0===n.themeNames.length)("ngIfElse",a)}},directives:[p.O5,p.sg,U,J],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}"]}),i})();function ke(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4),e._UZ(4,"img",5),e.TgZ(5,"h4"),e._uU(6,"No Records to show"),e.qZA()()()(),e.BQk())}function Oe(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-gallery-by-themewise",8),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("gallerDetails",n.unpublishedImages)("themeName",t)("type",n.type)}}function Te(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-feedback-by-themewise",9),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("feedbackDetails",n.feedbackItems)("themeName",t)("type","unPublished")}}function Ne(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e.YNc(3,Oe,2,3,"div",7),e.YNc(4,Te,2,3,"div",7),e.BQk()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",n.unpublishedImages&&n.unpublishedImages[t]||n.feedbackItems&&n.feedbackItems[t]&&(null==n.feedbackItems[t]||null==n.feedbackItems[t].unPublished?null:n.feedbackItems[t].unPublished.activityFeedback.length)>0?t:""," "),e.xp6(1),e.Q6J("ngIf",n.unpublishedImages&&(null==n.unpublishedImages[t]||null==n.unpublishedImages[t].images?null:n.unpublishedImages[t].images.length)>0),e.xp6(1),e.Q6J("ngIf",n.feedbackItems&&n.feedbackItems[t]&&(null==n.feedbackItems[t]||null==n.feedbackItems[t].unPublished?null:n.feedbackItems[t].unPublished.activityFeedback.length)>0)}}function we(i,s){if(1&i&&e.YNc(0,Ne,5,3,"ng-container",6),2&i){const t=e.oxw();e.Q6J("ngForOf",t.themeNames)}}let Me=(()=>{class i{constructor(){this.themeNames=[],this.themeImages=[]}ngOnInit(){this.unpublishedImages&&Object.keys(this.unpublishedImages).length>0&&Object.keys(this.unpublishedImages).map(t=>{this.themeNames.push(t)}),this.feedbackItems&&Object.keys(this.feedbackItems).length>0&&Object.keys(this.feedbackItems).map(t=>{this.feedbackItems[t].unPublished.activityFeedback.length>0&&this.themeNames.push(t)}),this.themeNames.length>0&&(this.themeNames=[...new Set(this.themeNames)])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-unpublished"]],inputs:{unpublishedImages:"unpublishedImages",type:"type",feedbackItems:"feedbackItems"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["second",""],[1,"document-listing"],[1,"no-data-box"],[1,"no-data"],["src","assets\\images\\activities\\nodata.png","alt","no data"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"gallerDetails","themeName","type"],[3,"feedbackDetails","themeName","type"]],template:function(t,n){if(1&t&&(e.YNc(0,ke,7,0,"ng-container",0),e.YNc(1,we,1,1,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",0===n.themeNames.length)("ngIfElse",a)}},directives:[p.O5,p.sg,U,J],styles:[""]}),i})();var Q=c(5245),Fe=c(2313),w=c(7322),De=c(8833);function Ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeSearch()}),e._uU(1,"cancel"),e.qZA()}}function Ze(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"img",32),e.BQk()),2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(1),e.Q6J("src",null==n.pagedItems[n.tagName]||null==n.pagedItems[n.tagName].images[t]?null:n.pagedItems[n.tagName].images[t].imageUrl,e.LSH)}}function Se(i,s){1&i&&(e.ynx(0),e._UZ(1,"img",33),e.BQk())}function Ue(i,s){if(1&i&&e.YNc(0,Se,2,0,"ng-container",14),2&i){const t=e.oxw().index,n=e.MAs(6),a=e.oxw(3);e.Q6J("ngIf",a.isDoc(null==a.pagedItems[a.tagName]||null==a.pagedItems[a.tagName].images[t]?null:a.pagedItems[a.tagName].images[t].imageName))("ngIfElse",n)}}function Ee(i,s){1&i&&(e.ynx(0),e._UZ(1,"img",34),e.BQk())}function Je(i,s){if(1&i&&e.YNc(0,Ee,2,0,"ng-container",14),2&i){const t=e.oxw().index,n=e.MAs(8),a=e.oxw(3);e.Q6J("ngIf",a.isPdf(null==a.pagedItems[a.tagName]||null==a.pagedItems[a.tagName].images[t]?null:a.pagedItems[a.tagName].images[t].imageName))("ngIfElse",n)}}function Qe(i,s){1&i&&e._UZ(0,"img",35)}function Ye(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e.YNc(2,Ze,2,1,"ng-container",14),e.YNc(3,Ue,1,2,"ng-template",null,23,e.W1O),e.YNc(5,Je,1,2,"ng-template",null,24,e.W1O),e.YNc(7,Qe,1,0,"ng-template",null,25,e.W1O),e.TgZ(9,"div",26)(10,"section",27),e._UZ(11,"mat-checkbox",28),e.qZA()(),e.TgZ(12,"div",29)(13,"h4",30),e._uU(14),e.qZA(),e.TgZ(15,"span")(16,"img",31),e.NdJ("click",function(){const o=e.CHM(t).index,l=e.oxw(3);return l.downloadSingleImage(null==l.pagedItems[l.tagName]?null:l.pagedItems[l.tagName].images[o])}),e.qZA()()()()()}if(2&i){const t=s.index,n=e.MAs(4),a=e.oxw(3);e.xp6(2),e.Q6J("ngIf",a.isImageFile(null==a.pagedItems[a.tagName]||null==a.pagedItems[a.tagName].images[t]?null:a.pagedItems[a.tagName].images[t].imageName))("ngIfElse",n),e.xp6(9),e.Q6J("formControlName",t),e.xp6(2),e.s9C("title",null==a.pagedItems[a.tagName]||null==a.pagedItems[a.tagName].images[t]?null:a.pagedItems[a.tagName].images[t].imageName),e.xp6(1),e.hij(" ",null==a.pagedItems[a.tagName]||null==a.pagedItems[a.tagName].images[t]?null:a.pagedItems[a.tagName].images[t].imageName," ")}}function Be(i,s){if(1&i&&(e.ynx(0,19),e.YNc(1,Ye,17,5,"div",20),e.BQk()),2&i){const t=e.oxw(2);e.Q6J("formGroup",t.tagForm),e.xp6(1),e.Q6J("ngForOf",t.imageFormArray.controls)}}function Ge(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Be,2,2,"ng-container",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.pagedItems[t.tagName]?null:t.pagedItems[t.tagName].images.length)>0)}}function ze(i,s){1&i&&(e.TgZ(0,"div",36)(1,"div",37)(2,"div",38),e._UZ(3,"img",39),e.TgZ(4,"h4"),e._uU(5,"No Records to show"),e.qZA()()()())}let je=(()=>{class i{constructor(t,n,a,o,l,r,m,u,b){this.filterService=t,this.apiService=n,this.fb=a,this.pagerService=o,this.dialog=l,this.http=r,this.toastr=m,this.sanitizer=u,this.communicationService=b,this.currentPage=1,this.totalItems=0,this.pager={},this.pageLimit=4,this.isSelectedAllImg=!1,this.tagForm=this.fb.group({images:this.fb.array([])}),this.enableOrDisableBtn=!1,this.searchControl=new g.NI("")}ngOnInit(){this.fetchTagDetails(),this.imageFormArray.valueChanges.subscribe(t=>{this.enableOrDisableBtn=!!t.some(a=>!0===a)})}get imageFormArray(){return this.tagForm.controls.images}onPageChange(t){t.pager&&(this.pager=t.pager,this.currentPage=this.pager.currentPage,this.fetchTagDetails())}fetchTagDetails(t=!1){let n,a="",o=0;for(let[r,m]of this.filterService.globalFilterArr.entries())0!==o&&(a+=":"),a+="tagName"==r?`tagName=${this.tagName}`.toString().trim():`${m}`.toString().trim(),o++;const l=(new d.LE).set("imageType","ALL").set("searchCriteria",a).set("pageNo",this.currentPage).set("pageSize",this.pageLimit);n=t?`${__getImagesUrl()}?searchCriteria=tagName=${this.tagName}:imageName=${this.searchControl.value}:pageNo=${this.currentPage}:pageSize=${this.pageLimit}`:`${__getAllImagesUrl()}?${l} `,this.apiService.get(n).subscribe({next:r=>{var m;r&&(this.totalItems=null===(m=r.data.creativeImages[this.tagName])||void 0===m?void 0:m.totalElements,this.setPage(this.currentPage,r.data))},error:r=>{this.toastr.error(r)},complete:()=>{}})}setPage(t,n){Object.keys(n.creativeImages).length>0?(this.pager=this.pagerService.getPager(this.totalItems,t,this.pageLimit),this.pagedItems=n.creativeImages,this.imageFormArray.clear(),this.addImagesToForm()):(this.pager=this.pagerService.getPager(0,1,this.pageLimit),this.pagedItems=null)}selectAllImages(t){this.isSelectedAllImg=!this.isSelectedAllImg,this.pagedItems[t].images.map((n,a)=>{this.updateImageFormArray(a,this.isSelectedAllImg)})}updateImageFormArray(t,n){this.imageFormArray.at(t).patchValue(n)}addImagesToForm(){for(let t of this.pagedItems[this.tagName].images){const n=new g.NI(!1);this.imageFormArray.push(n)}}downloadImages(){const t=[];this.pagedItems[this.tagName].images.map((n,a)=>{this.imageFormArray.value[a]&&t.push({url:n.imageUrl,imageName:n.imageName})}),(null==t?void 0:t.length)&&this.downloadImagesByUrl(t)}downloadSingleImage(t){this.downloadImagesByUrl([{url:t.imageUrl,imageName:t.imageName}])}downloadImagesByUrl(t){var n=this;this.dialog.open(f.z,{width:"470px",data:{heading:"Download Confirmation",message:"Are you sure you want to download the images?"}}).afterClosed().subscribe(o=>{o&&t.forEach(function(){var l=(0,D.Z)(function*(r){if(r.url){const m={headers:new d.WM({"Content-Type":"download"}),responseType:"blob"};n.communicationService.get(r.url,m).subscribe(u=>{const b=new Blob([u],{type:u.type}),B=window.URL.createObjectURL(b),v=document.createElement("a");v.href=B,v.download=r.imageName,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(B)})}else n.toastr.warning("Invalid File url")});return function(r){return l.apply(this,arguments)}}())})}searchTags(){this.searchControl.value&&(this.fetchTagDetails(!0),this.currentPage=1)}onChangeState(){this.searchControl.value||(this.currentPage=1,this.fetchTagDetails())}closeSearch(){this.searchControl.setValue(""),this.currentPage=1,this.fetchTagDetails()}isImageFile(t){var n,a;const l=null===(a=null===(n=t.split("."))||void 0===n?void 0:n.pop())||void 0===a?void 0:a.toLowerCase();return["jpg","jpeg","png","gif","bmp","svg","mpeg","webm","ogg"].includes(l)}isDoc(t){return t.endsWith(".doc")||t.endsWith(".docx")}isPdf(t){return t.endsWith(".pdf")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.Z),e.Y36(x.s),e.Y36(g.qu),e.Y36(P.e),e.Y36(O.uw),e.Y36(d.eN),e.Y36(k._W),e.Y36(Fe.H7),e.Y36(E.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-creative-details"]],inputs:{tagDetails:"tagDetails",tagName:"tagName"},decls:26,vars:9,consts:[[1,"row"],[1,"check-section","mb-3"],[1,"select-all"],[1,"example-margin",3,"change"],[1,"twobtn-group"],[1,"example-form"],["appearance","outline",1,"m-0","p-0"],[1,"flbx-stretch"],["type","text","matInput","","placeholder","Search by image name",3,"formControl","keyup.enter","change"],[1,"tb-search-ico"],["class","cancel","matSuffix","",3,"click",4,"ngIf"],["matSuffix","",3,"click"],["type","button",1,"btn","btn-grey",3,"disabled","click"],["src","assets/images/download.svg","alt",""],[4,"ngIf","ngIfElse"],["noData",""],[3,"page","pageSize","totalItems","pageChange"],["matSuffix","",1,"cancel",3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","col-12 col-sm-3 mb-3","formArrayName","images",4,"ngFor","ngForOf"],["formArrayName","images",1,"col-12","col-sm-3","mb-3"],[1,"all-activity-card"],["checkForDoc",""],["checForPdf",""],["otherFile",""],[1,"overlay-sec"],[1,"check-section"],[1,"example-margin",3,"formControlName"],[1,"all-activity-card-content","d-flex","align-items-center","justify-content-between","py-2","px-2"],[1,"d-flex","m-0",3,"title"],["src","assets/images/download.svg","alt","",3,"click"],[1,"activity-img",3,"src"],["src","assets/images/creatives/doc.svg",1,"activity-img"],["src","assets/images/creatives/pdf.svg",1,"activity-img"],["src","assets/images/creatives/file.svg",1,"activity-img"],[1,"document-listing"],[1,"no-data-box"],[1,"no-data"],["src","assets\\images\\activities\\nodata.png","alt","no data"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"section",1)(5,"div",2)(6,"mat-checkbox",3),e.NdJ("change",function(){return n.selectAllImages(n.tagName)}),e._uU(7,"Select All"),e.qZA()(),e.TgZ(8,"div",4)(9,"form",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Search"),e.qZA(),e.TgZ(13,"div",7)(14,"input",8),e.NdJ("keyup.enter",function(){return n.searchTags()})("change",function(){return n.onChangeState()}),e.qZA(),e.TgZ(15,"span",9),e.YNc(16,Ae,2,0,"mat-icon",10),e.TgZ(17,"mat-icon",11),e.NdJ("click",function(){return n.searchTags()}),e._uU(18,"search"),e.qZA()()()()(),e.TgZ(19,"button",12),e.NdJ("click",function(){return n.downloadImages()}),e._UZ(20,"img",13),e._uU(21," Download "),e.qZA()()(),e.YNc(22,Ge,2,1,"ng-container",14),e.YNc(23,ze,6,0,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(25,"app-pagination",16),e.NdJ("pageChange",function(o){return n.onPageChange(o)}),e.qZA()()),2&t){const a=e.MAs(24);e.xp6(3),e.Oqu(n.tagName),e.xp6(11),e.Q6J("formControl",n.searchControl),e.xp6(2),e.Q6J("ngIf",null==n.searchControl?null:n.searchControl.value),e.xp6(3),e.Q6J("disabled",!n.enableOrDisableBtn),e.xp6(3),e.Q6J("ngIf",n.pagedItems)("ngIfElse",a),e.xp6(3),e.Q6J("page",n.currentPage)("pageSize",n.pageLimit)("totalItems",n.totalItems)}},directives:[T.oG,g._Y,g.JL,g.F,w.KE,w.hX,De.Nt,g.Fj,g.JJ,g.oH,p.O5,Q.Hw,w.R9,g.sg,p.sg,g.CE,g.u,N.Q],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}.btn[_ngcontent-%COMP%]{min-height:41px;margin-top:-7px}@media screen and (max-width: 768px){.btn[_ngcontent-%COMP%]{margin-bottom:10px}}.btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.back-btn[_ngcontent-%COMP%]{margin-bottom:15px;color:#212529!important;background-color:transparent!important;border-color:#fff!important;padding:0!important}"]}),i})();function Le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"img",7),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).goToTagDetails(o)}),e.qZA(),e.TgZ(3,"div",8)(4,"h4",9)(5,"span",10)(6,"mat-icon"),e._uU(7,"bookmark_border"),e.qZA()(),e._uU(8),e.qZA(),e.TgZ(9,"p",11),e._uU(10),e.qZA()()()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(8),e.hij("",t," "),e.xp6(2),e.Oqu(null==n.creativeImages[t]?null:n.creativeImages[t].totalElements)}}function $e(i,s){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,Le,11,2,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tagNames)}}function qe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().goback()}),e._UZ(1,"img",13),e._uU(2," back\n"),e.qZA()}}function Re(i,s){if(1&i&&e._UZ(0,"app-creative-details",14),2&i){const t=e.oxw();e.Q6J("tagDetails",t.creativeImages)("tagName",t.selectedTag)}}let He=(()=>{class i{constructor(){this.tagNames=[],this.showTagsDetails=!1}ngOnInit(){Object.keys(this.creativeImages).length>0&&Object.keys(this.creativeImages).map(t=>{this.tagNames.push(t)})}goToTagDetails(t){this.selectedTag=t,this.showTagsDetails=!0}goback(){this.showTagsDetails=!this.showTagsDetails}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-creatives"]],inputs:{creativeImages:"creativeImages",type:"type"},decls:3,vars:3,consts:[["class","row",4,"ngIf"],["class","btn back-btn",3,"click",4,"ngIf"],[3,"tagDetails","tagName",4,"ngIf"],[1,"row"],["class","col-12 col-sm-3 g-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-3","g-4"],[1,"creatives-card"],["src","assets/images/creatives/folder.svg","alt","",1,"creatives-img",3,"click"],[1,"creatives-card-content","p-2"],[1,"d-flex","m-0"],[1,"me-1"],[1,"m-0","ps-4"],[1,"btn","back-btn",3,"click"],["src","assets\\images\\creatives\\back-icon.svg"],[3,"tagDetails","tagName"]],template:function(t,n){1&t&&(e.YNc(0,$e,2,1,"div",0),e.YNc(1,qe,3,0,"button",1),e.YNc(2,Re,1,2,"app-creative-details",2)),2&t&&(e.Q6J("ngIf",!n.showTagsDetails&&n.tagNames.length>0),e.xp6(1),e.Q6J("ngIf",n.showTagsDetails),e.xp6(1),e.Q6J("ngIf",n.showTagsDetails))},directives:[p.O5,p.sg,Q.Hw,je],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}.btn[_ngcontent-%COMP%]{min-height:41px;margin-top:-7px}@media screen and (max-width: 768px){.btn[_ngcontent-%COMP%]{margin-bottom:10px}}.btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.back-btn[_ngcontent-%COMP%]{margin-bottom:15px;color:#212529!important;background-color:transparent!important;border-color:#fff!important;padding:0!important}"]}),i})();function We(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-group",9),e.NdJ("selectedIndexChange",function(a){return e.CHM(t),e.oxw().selectedTabIndex=a})("selectedTabChange",function(a){return e.CHM(t),e.oxw().onTabChanged(a)}),e._UZ(1,"mat-tab",10)(2,"mat-tab",11)(3,"mat-tab",12),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("selectedIndex",t.selectedTabIndex)}}function Xe(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-published",16),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("publishedImages",t.publishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function Ve(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-published",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("publishedImages",t.publishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function Ke(i,s){if(1&i&&e.YNc(0,Ve,2,3,"ng-container",13),2&i){e.oxw();const t=e.MAs(5),n=e.oxw();e.Q6J("ngIf",n.publishedItems)("ngIfElse",t)}}function et(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-published",16),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("publishedImages",t.publishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function tt(i,s){if(1&i&&e.YNc(0,et,2,3,"ng-container",8),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.feedbackItems)}}function nt(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Xe,2,3,"ng-container",13),e.YNc(2,Ke,1,2,"ng-template",null,14,e.W1O),e.YNc(4,tt,1,1,"ng-template",null,15,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.publishedItems&&n.feedbackItems)("ngIfElse",t)}}function it(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-unpublished",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("unpublishedImages",t.unPublishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function at(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-unpublished",17),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("unpublishedImages",t.unPublishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function st(i,s){if(1&i&&e.YNc(0,at,2,3,"ng-container",13),2&i){e.oxw();const t=e.MAs(5),n=e.oxw();e.Q6J("ngIf",n.unPublishedItems)("ngIfElse",t)}}function ot(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"app-unpublished",17),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("unpublishedImages",t.unPublishedItems)("type",t.type)("feedbackItems",t.feedbackItems)}}function lt(i,s){if(1&i&&e.YNc(0,ot,2,3,"ng-container",8),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.feedbackItems)}}function ct(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,it,2,3,"ng-container",13),e.YNc(2,st,1,2,"ng-template",null,14,e.W1O),e.YNc(4,lt,1,1,"ng-template",null,15,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.unPublishedItems&&n.feedbackItems)("ngIfElse",t)}}function rt(i,s){if(1&i&&e._UZ(0,"app-creatives",20),2&i){const t=e.oxw(2);e.Q6J("creativeImages",t.creativesItems)("type",t.type)}}function mt(i,s){1&i&&(e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._UZ(3,"img",24),e.TgZ(4,"h4"),e._uU(5,"No Records to show"),e.qZA()()()())}function gt(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,rt,1,2,"app-creatives",18),e.YNc(2,mt,6,0,"div",19),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.creativesItems),e.xp6(1),e.Q6J("ngIf",!t.creativesItems)}}let Y=(()=>{class i{constructor(t,n,a,o){this.apiService=t,this.filterService=n,this.storageService=a,this._overlaySidePanelService=o,this.selectedTabIndex=0}get roleEnum(){return C.G}ngOnInit(){var t=this;this.role=this.storageService.getData("Role"),this.apiService.isProfileSwitched().subscribe(n=>{n&&(this.role=this.storageService.getData("Role"))}),this.dropDownSubscription=this.filterService.getdrpdwnValues().subscribe(function(){var n=(0,D.Z)(function*(a){a&&"/gallery/gallery-list"==t.apiService.currentRouteUrl&&(t.gallerySearchParam=a.toString().trim(),t.fetchGalleryDetails(),t.fetchFeedbackDetails())});return function(a){return n.apply(this,arguments)}}()),this.apiService.feedbackEditFromGallery$.subscribe(n=>{n&&(this.sideOverlayData={width:"750",label:"Edit Feedback",isEdit:!1,data:{}},this._overlaySidePanelService.setContent(G.f),this._overlaySidePanelService.show())}),this.feedbackCloseSubscription=this.apiService.feedbackPanelClose$.subscribe(n=>{n.status&&this._overlaySidePanelService.close()})}ngOnDestroy(){this.dropDownSubscription&&this.dropDownSubscription.unsubscribe(),this.feedbackCloseSubscription&&this.feedbackCloseSubscription.unsubscribe()}onTabChanged(t){this.selectedTabIndex=t.index,this.fetchGalleryDetails(),this.fetchFeedbackDetails()}fetchGalleryDetails(){const t=(new d.LE).set("imageType","ALL").set("searchCriteria",this.gallerySearchParam.toString().trim()).set("pageNo",1).set("pageSize",4),n=`${__getAllImagesUrl()}?${t} `;this.apiService.get(n).subscribe({next:a=>{a&&this.selectedGallerTab(a)},error:()=>{},complete:()=>{}})}selectedGallerTab(t){switch(this.role==this.roleEnum.EMPLOYEE&&(this.selectedTabIndex=0),this.selectedTabIndex){case 0:this.publishedItems=t.data.publishedImages,this.type="publishedImages";break;case 1:this.unPublishedItems=t.data.unPublishedImages,this.type="unPublishedImages";break;case 2:this.creativesItems=t.data.creativeImages,this.type="creativeImages";break;default:this.selectedTabIndex=0,this.publishedItems=t.data.publishedImages,this.type="publishedImages"}}fetchFeedbackDetails(){const t=(new d.LE).set("searchCriteria",this.gallerySearchParam.toString().trim()).set("pageNo",1).set("pageSize",4),n=`${__getAllFeedbacksUrl()}?${t} `;this.apiService.get(n).subscribe({next:a=>{a&&(this.feedbackItems=a.data)},error:()=>{},complete:()=>{}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.s),e.Y36(y.Z),e.Y36(I.C),e.Y36(A.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gallery-details"]],decls:12,vars:5,consts:[[3,"overlayData"],[1,"page__wrapper"],[1,"content-section"],[1,"container-fluid","page__content-block"],[1,"page__header"],[1,"page__tabContainer"],[1,"page__heading"],["class","page__tab-sec",3,"selectedIndex","selectedIndexChange","selectedTabChange",4,"ngIf"],[4,"ngIf"],[1,"page__tab-sec",3,"selectedIndex","selectedIndexChange","selectedTabChange"],["label","Published"],["label","Unpublished"],["label","Creatives"],[4,"ngIf","ngIfElse"],["second",""],["third",""],[3,"publishedImages","type","feedbackItems"],[3,"unpublishedImages","type","feedbackItems"],[3,"creativeImages","type",4,"ngIf"],["class","document-listing",4,"ngIf"],[3,"creativeImages","type"],[1,"document-listing"],[1,"no-data-box"],[1,"no-data"],["src","assets\\images\\activities\\nodata.png","alt","no data"]],template:function(t,n){1&t&&(e._UZ(0,"app-overlay-side-panel",0),e.TgZ(1,"div",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._uU(7,"Activity Photos"),e.qZA()()(),e.YNc(8,We,4,1,"mat-tab-group",7),e.YNc(9,nt,6,2,"div",8),e.YNc(10,ct,6,2,"div",8),e.YNc(11,gt,3,2,"div",8),e.qZA()()()),2&t&&(e.Q6J("overlayData",n.sideOverlayData),e.xp6(8),e.Q6J("ngIf",n.role!==n.roleEnum.EMPLOYEE),e.xp6(1),e.Q6J("ngIf",0===n.selectedTabIndex),e.xp6(1),e.Q6J("ngIf",1===n.selectedTabIndex),e.xp6(1),e.Q6J("ngIf",2===n.selectedTabIndex))},directives:[z.L,p.O5,Z.SP,Z.uX,Pe,Me,He],styles:[".check-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media screen and (max-width: 768px){.select-all[_ngcontent-%COMP%]{margin-bottom:10px}}.card-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0;font-weight:400}.act-img-bottom[_ngcontent-%COMP%]   .gall-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.act-img-bottom[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.act-img-bottom[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#fff;margin:0}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center}.act-img-bottom[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:7px}.creatives-card[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #DCDCDC}.creatives-card[_ngcontent-%COMP%]   .creatives-img[_ngcontent-%COMP%]{height:150px;width:100%;object-fit:cover}.creatives-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.creatives-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bfbcbc}.creatives-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px}.twobtn-group[_ngcontent-%COMP%]{display:flex;align-items:center}.twobtn-group[_ngcontent-%COMP%]   .btn-grey[_ngcontent-%COMP%]{height:auto}.all-activity-card[_ngcontent-%COMP%]{border:1px solid #DCDCDC;padding:5px;position:relative}.all-activity-card[_ngcontent-%COMP%]   .overlay-sec[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;justify-content:flex-end;align-items:flex-start;z-index:1;width:100%;padding:15px}.all-activity-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px!important;font-weight:500;padding-top:3px;white-space:nowrap;width:220px;overflow:hidden;text-overflow:ellipsis;display:block!important}"]}),i})();const pt=[{path:"",component:Y},{path:"gallery-list",component:Y}];let dt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[F.Bz.forChild(pt)],F.Bz]}),i})();var ht=c(7777),_t=c(8882),ut=c(7630),ft=c(231);let bt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,dt,ht.m,_t.u,ut.f,ft.n]]}),i})()}}]);